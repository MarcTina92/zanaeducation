{% extends "templates/web.html" %}
{% block page_content %}
<div class="max-w-4xl mx-auto px-4 py-6">
  <h1 class="text-3xl font-bold mb-6">👨‍👩‍👧‍👦 Parent Dashboard</h1>

  {% for student in students %}
  <div class="mb-4 border rounded-xl overflow-hidden">
    <button class="w-full text-left px-6 py-4 bg-blue-600 text-white text-lg font-semibold focus:outline-none" onclick="togglePanel('{{ loop.index }}')">
      {{ student.name }} - {{ student.grade }}
    </button>
    <div id="panel-{{ loop.index }}" class="hidden bg-white p-6">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="border p-4 rounded-xl shadow">
          <h3 class="font-semibold text-lg mb-2">Basic Info</h3>
          <p>Program: {{ student.program }}</p>
          <a href="/student-profile/{{ student.route }}" class="text-green-600 underline mt-2 inline-block">View Profile</a>
        </div>

        <div class="border p-4 rounded-xl shadow">
          <h3 class="font-semibold text-lg mb-2">Attendance</h3>
          <p>Present: {{ student.present_days }} days</p>
          <a href="/student-attendance/{{ student.route }}" class="text-green-600 underline mt-2 inline-block">View Attendance</a>
        </div>

        <div class="border p-4 rounded-xl shadow">
          <h3 class="font-semibold text-lg mb-2">Grades</h3>
          <p>GPA: {{ student.gpa }}</p>
          <a href="/student-grades/{{ student.route }}" class="text-green-600 underline mt-2 inline-block">View Grades</a>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
</div>

<script>
  function togglePanel(index) {
    const panel = document.getElementById("panel-" + index);
    panel.classList.toggle("hidden");
  }
</script>
{% endblock %}
